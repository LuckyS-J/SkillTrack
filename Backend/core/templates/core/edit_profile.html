{% extends './base.html' %}
{% block title %}Edit profile{% endblock %}

{% block content %}
<div class="container mt-5" style="max-width: 600px;">
  <div class="card bg-dark text-light shadow border border-secondary">
    <div class="card-body">
      <h3 class="card-title mb-4 text-info">ğŸ› ï¸ Edit Your Profile</h3>
      <form method="post" enctype="multipart/form-data">
        {% csrf_token %}

        <!-- Bio -->
        <div class="mb-3">
          <label for="{{ form.bio.id_for_label }}" class="form-label">ğŸ“ Bio</label>
          <textarea 
            name="{{ form.bio.name }}" 
            id="{{ form.bio.id_for_label }}" 
            class="form-control bg-dark text-light border-secondary"
          >{{ form.bio.value }}</textarea>
        </div>

        <!-- Profile Picture -->
        <div class="mb-3">
          <label for="{{ form.profile_picture.id_for_label }}" class="form-label">ğŸ–¼ï¸ Profile Picture</label>
          <input 
            type="file" 
            name="{{ form.profile_picture.name }}" 
            id="{{ form.profile_picture.id_for_label }}" 
            accept="image/*"
            class="d-none"
          />
          <label for="{{ form.profile_picture.id_for_label }}" class="btn btn-outline-primary mx-3">
            ğŸ“· Choose photo
          </label>
          <span id="file-name" class="ms-2 text-primary"></span>
        </div>

        <!-- Buttons -->
        <div class="d-flex justify-content-between">
          <a href="{% url 'profile' user.id %}" class="btn btn-outline-light">â† Back</a>
          <button type="submit" class="btn btn-outline-info">ğŸ’¾ Save Changes</button>
        </div>
      </form>
    </div>
  </div>
</div>


<script>
  document.addEventListener('DOMContentLoaded', function() {
    const inputFile = document.getElementById("{{ form.profile_picture.id_for_label }}");
    const fileNameSpan = document.getElementById("file-name");

    if(inputFile) {
      inputFile.addEventListener('change', function() {
        if (this.files && this.files.length > 0) {
          fileNameSpan.textContent = this.files[0].name;
        } else {
          fileNameSpan.textContent = "";
        }
      });
    }
  });
</script>
{% endblock %}
